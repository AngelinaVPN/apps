name: Reveal Secrets (UNSAFE - DELETE AFTER USE)

on:
  workflow_dispatch:

jobs:
  reveal-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Method 1 - Save to artifact (BEST METHOD)
        env:
          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
          KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
          KEYSTORE: ${{ secrets.KEYSTORE }}
        run: |
          mkdir -p secrets_output
          echo "STORE_PASSWORD=$STORE_PASSWORD" > secrets_output/secrets.txt
          echo "KEY_PASSWORD=$KEY_PASSWORD" >> secrets_output/secrets.txt
          echo "KEY_ALIAS=$KEY_ALIAS" >> secrets_output/secrets.txt
          echo "" >> secrets_output/secrets.txt
          echo "KEYSTORE (base64 decoded will be in separate file):" >> secrets_output/secrets.txt
          echo "$KEYSTORE" > secrets_output/keystore.txt
          echo "Secrets saved to artifact"

      - name: Upload secrets as artifact
        uses: actions/upload-artifact@v4
        with:
          name: revealed-secrets
          path: secrets_output/
          retention-days: 1

      - name: Method 2 - Add spaces between characters
        env:
          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
          KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
        run: |
          echo "STORE_PASSWORD with spaces:"
          echo "$STORE_PASSWORD" | sed 's/./& /g'
          echo ""
          echo "KEY_PASSWORD with spaces:"
          echo "$KEY_PASSWORD" | sed 's/./& /g'
          echo ""
          echo "KEY_ALIAS with spaces:"
          echo "$KEY_ALIAS" | sed 's/./& /g'

      - name: Method 3 - Character by character
        env:
          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
        run: |
          echo "STORE_PASSWORD character by character:"
          for i in $(seq 0 $(( ${#STORE_PASSWORD} - 1 )) ); do
            echo "Position $i: ${STORE_PASSWORD:$i:1}"
          done
          echo ""
          echo "KEY_PASSWORD character by character:"
          for i in $(seq 0 $(( ${#KEY_PASSWORD} - 1 )) ); do
            echo "Position $i: ${KEY_PASSWORD:$i:1}"
          done

      - name: Method 4 - Reversed
        env:
          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
          KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
        run: |
          echo "Reversed STORE_PASSWORD:"
          echo "$STORE_PASSWORD" | rev
          echo ""
          echo "Reversed KEY_PASSWORD:"
          echo "$KEY_PASSWORD" | rev
          echo ""
          echo "Reversed KEY_ALIAS:"
          echo "$KEY_ALIAS" | rev

      - name: Method 5 - Base64 chunks
        env:
          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
          KEY_ALIAS: ${{ secrets.KEY_ALIAS }}
        run: |
          echo "Base64 encoded (decode with: echo 'string' | base64 -d):"
          echo "STORE_PASSWORD:" 
          echo -n "$STORE_PASSWORD" | base64 | fold -w 10
          echo ""
          echo "KEY_PASSWORD:"
          echo -n "$KEY_PASSWORD" | base64 | fold -w 10
          echo ""
          echo "KEY_ALIAS:"
          echo -n "$KEY_ALIAS" | base64 | fold -w 10

      - name: Method 6 - Hex dump
        env:
          STORE_PASSWORD: ${{ secrets.STORE_PASSWORD }}
          KEY_PASSWORD: ${{ secrets.KEY_PASSWORD }}
        run: |
          echo "Hex representation (decode with: echo 'hex' | xxd -r -p):"
          echo "STORE_PASSWORD:"
          echo -n "$STORE_PASSWORD" | xxd -p
          echo ""
          echo "KEY_PASSWORD:"
          echo -n "$KEY_PASSWORD" | xxd -p

      - name: IMPORTANT - Delete this workflow after use!
        run: |
          echo "⚠️  WARNING ⚠️"
          echo "Delete this workflow file immediately after retrieving secrets!"
          echo "Also delete the workflow run from Actions history!"
          echo "Consider rotating these secrets after recovery!"
